QREG 4
CREG 3

SEQGATE H FROM 0 TO 2
GATE X(3)

GATE CP(PI/4,0,3)

GATE CP(PI/4,1,3)
GATE CP(PI/4,1,3)

FOR n FROM 0 TO 3
    GATE CP(-PI/4,2,3)
ENDFOR

GATE SWAP(0,2)
GATE H(0)
GATE CP(-PI/2,0,1)
GATE H(1)

GATE CP(-PI/4,0,2)
GATE CP(-PI/2,1,2)
GATE H(2)

SEQMEASURE FROM 0 TO 2

ASSERT (|100>,|100>)